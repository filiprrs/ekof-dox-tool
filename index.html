<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="true">
    <link href="https://fonts.googleapis.com/css?family=Anton|Baloo+Bhai|Girassol|Raleway&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="widget col l4 m12 s12 offset-l4">
          <h4> ekof dox tool </h4>
          <h6> neophodno je biti ulogovan u sservis nalog u drugom prozoru </h6>
          <form class="col s12">
            <div class="row"> 
              <div class="input-field col s12">
                <select id="rok">
                  <option value="01">Januar</option>
                  <option value="02">Februar</option>
                  <option value="04">April</option>
                  <option value="05">Maj</option>
                  <option value="06">Jun</option>
                  <option value="07">Jul</option>
                  <option value="09">Septembar</option>
                  <option value="10">Oktobar</option>
                  <option value="30">Oktobar 2</option>
                  <option value="co">Covid-19</option>
                  <option value="11">Novembar</option>
                  <option value="12">Decembar</option>
                </select>
                <label>Ispitni rok:</label>
              </div>
              <div class="input-field col s12">
                <select id="akreditacija">
                  <option value="1">08</option>
                  <option value="2" selected="selected">13</option>
                  <option value="3">20</option>
                </select>
                <label>Akreditacija:</label>
              </div>			  
              <div class="input-field col s6">
                <input id="šifra" type="text" autocomplete="off">
                <label for="value">Šifra predmeta</label>
              </div>
			  <div class="input-field col s12">
                <input id="nastavnik" type="text" autocomplete="off">
                <label for="value">Oznaka nastavnika</label>
              </div>
			  <div class="input-field col s12">
                <input id="godina" type="text" autocomplete="off">
                <label for="value">Godina</label>
              </div>
              <div class="input-field col s6">
                <button onclick=output() class="btn waves-effect waves-light" type="button">Pretraži</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
  <script>
    function output(){
	  var rok = document.getElementById('rok').value;
	  var akreditacija = document.getElementById('akreditacija');
	  var akreditacijatext = akreditacija.options[akreditacija.selectedIndex].text;
	  var šifra = document.getElementById('šifra').value;
	  var nastavnik = document.getElementById('nastavnik').value;
	  var godina = document.getElementById('godina').value;
	  
	  if (šifra.length == 4 && rok != 30) {
	     rok = parseInt(rok) + 40;
	  } else if (šifra.length == 4 && rok == 30) {
	     rok = 530;
	  }
	  
	  if (šifra == "" || nastavnik == "" || godina == "" ){
        alert("Neophodno je popuniti sva polja!");
        return false;
      }
	  
	  var link = "http://sservis.ekof.bg.ac.rs/do?action=rezultatiIspita&ispitniRok="+rok+"&oznakaPlana="+akreditacijatext+"&oznakaPredmeta="+šifra+"&oznakaNastavnika="+nastavnik+"&godina="+godina+"&termin=1";
	  
	  window.open(link);	  
    };

    document.addEventListener('DOMContentLoaded', function() {
      var elems = document.querySelectorAll('select');
      var instances = M.FormSelect.init(elems);
    });
  </script>
</html>
